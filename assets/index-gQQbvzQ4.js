(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();const D="/assets/conway_wasm_bg-DsXgrjFv.wasm",R=async(t={},e)=>{let r;if(e.startsWith("data:")){const i=e.replace(/^data:.*?base64,/,"");let n;if(typeof Buffer=="function"&&typeof Buffer.from=="function")n=Buffer.from(i,"base64");else if(typeof atob=="function"){const s=atob(i);n=new Uint8Array(s.length);for(let l=0;l<s.length;l++)n[l]=s.charCodeAt(l)}else throw new Error("Cannot decode base64-encoded data URL");r=await WebAssembly.instantiate(n,t)}else{const i=await fetch(e),n=i.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&n.startsWith("application/wasm"))r=await WebAssembly.instantiateStreaming(i,t);else{const s=await i.arrayBuffer();r=await WebAssembly.instantiate(s,t)}}return r.instance.exports};let o;function M(t){o=t}const P=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let L=new P("utf-8",{ignoreBOM:!0,fatal:!0});L.decode();let h=null;function E(){return(h===null||h.byteLength===0)&&(h=new Uint8Array(o.memory.buffer)),h}function x(t,e){return t=t>>>0,L.decode(E().subarray(t,t+e))}const U=Object.freeze({Dead:0,0:"Dead",Alive:1,1:"Alive"}),v=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>o.__wbg_universe_free(t>>>0,1));class b{static __wrap(e){e=e>>>0;const r=Object.create(b.prototype);return r.__wbg_ptr=e,v.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,v.unregister(this),e}free(){const e=this.__destroy_into_raw();o.__wbg_universe_free(e,0)}static new(){const e=o.universe_new();return b.__wrap(e)}toggle_cell(e,r){o.universe_toggle_cell(this.__wbg_ptr,e,r)}set_width(e){o.universe_set_width(this.__wbg_ptr,e)}set_height(e){o.universe_set_height(this.__wbg_ptr,e)}width(){return o.universe_width(this.__wbg_ptr)>>>0}height(){return o.universe_height(this.__wbg_ptr)>>>0}cells(){return o.universe_cells(this.__wbg_ptr)>>>0}render(){let e,r;try{const i=o.universe_render(this.__wbg_ptr);return e=i[0],r=i[1],x(i[0],i[1])}finally{o.__wbindgen_free(e,r,1)}}tick(){o.universe_tick(this.__wbg_ptr)}}function j(){const t=o.__wbindgen_export_0,e=t.grow(4);t.set(0,void 0),t.set(e+0,void 0),t.set(e+1,null),t.set(e+2,!0),t.set(e+3,!1)}function F(t,e){throw new Error(x(t,e))}URL=globalThis.URL;const _=await R({"./conway_wasm_bg.js":{__wbindgen_throw:F,__wbindgen_init_externref_table:j}},D),A=_.memory,W=_.__wbg_universe_free,B=_.universe_new,q=_.universe_toggle_cell,I=_.universe_set_width,k=_.universe_set_height,z=_.universe_width,G=_.universe_height,N=_.universe_cells,X=_.universe_render,Y=_.universe_tick,H=_.__wbindgen_export_0,K=_.__wbindgen_free,O=_.__wbindgen_start,V=Object.freeze(Object.defineProperty({__proto__:null,__wbg_universe_free:W,__wbindgen_export_0:H,__wbindgen_free:K,__wbindgen_start:O,memory:A,universe_cells:N,universe_height:G,universe_new:B,universe_render:X,universe_set_height:k,universe_set_width:I,universe_tick:Y,universe_toggle_cell:q,universe_width:z},Symbol.toStringTag,{value:"Module"}));M(V);O();const c=5,Z="rgba(255, 255, 255, 0.87)",$="#242424",J="rgba(255, 255, 255, 0.87)",w=b.new(),d=w.width(),f=w.height();document.querySelector("#app").innerHTML=`
  <div>
    <h1>Conways Game of Life</h1>
    <div class="main">
      <button id="play-pause"></button>
      <canvas id="game-of-life-canvas"></canvas> 
    </div>
  </div>
`;let g=null;const y=document.querySelector("#play-pause");y.addEventListener("click",()=>{te()?C():Q()});const u=document.querySelector("#game-of-life-canvas");u.height=(c+1)*f+1;u.width=(c+1)*d+1;u.addEventListener("click",t=>{const e=u.getBoundingClientRect(),r=u.width/e.width,i=u.height/e.height,n=(t.clientX-e.left)*r,s=(t.clientY-e.top)*i,l=Math.min(Math.floor(s/(c+1)),f-1),S=Math.min(Math.floor(n/(c+1)),d-1);w.toggle_cell(l,S),m(),p()});const a=u.getContext("2d"),C=()=>{y.textContent="⏸",T()},Q=()=>{y.textContent="▶",g&&(cancelAnimationFrame(g),g=null)},m=()=>{if(a){a.beginPath(),a.strokeStyle=Z;for(let t=0;t<=d;t++)a.moveTo(t*(c+1)+1,0),a.lineTo(t*(c+1)+1,(c+1)*f+1);for(let t=0;t<=f;t++)a.moveTo(0,t*(c+1)+1),a.lineTo((c+1)*d+1,t*(c+1)+1);a.stroke()}},ee=(t,e)=>t*d+e,te=()=>g==null,p=()=>{if(a){const t=w.cells(),e=new Uint8Array(A.buffer,t,d*f);a.beginPath();for(let r=0;r<f;r++)for(let i=0;i<d;i++){const n=ee(r,i);a.fillStyle=e[n]===U.Dead?$:J,a.fillRect(i*(c+1)+1,r*(c+1)+1,c,c)}a.stroke()}},T=()=>{w.tick(),m(),p(),g=requestAnimationFrame(T)};m();p();C();
